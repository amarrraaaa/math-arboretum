<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan Soal - Bab 3: Pengukuran Panjang dan Berat</title>
    <link rel="icon" href="icon.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
         /* Variabel Warna */
        :root {
            --color-primary: #854932; /* Cokelat Tua */
            --color-secondary: #CC7722; /* Oranye/Emas - Aksen */
            --color-bg-light: #f4f7f6; /* Latar Belakang Terang */
            --color-card-light: #ffffff; /* Card Terang */
            --color-text-dark: #333333; /* Teks Gelap */
            --color-error: #D9534F; /* Merah */
            --color-success: #5CB85C; /* Hijau */
            --color-shadow: rgba(0, 0, 0, 0.15); 
            --sidebar-width: 250px; 
            /* Warna Header Konsisten */
            --color-header-light: #A0522D; /* Solid: Sienna */
        }

        /* Dark Theme Variables */
        .dark-theme {
            --color-primary: #D8D8D8; 
            --color-secondary: #FFC94A; 
            --color-bg-light: #202c33; 
            --color-card-light: #2c3940; 
            --color-text-dark: #f0f0f0; 
            --color-shadow: rgba(0, 0, 0, 0.4); 
            /* Warna Header Dark Konsisten */
            --color-header-dark: #1f3a5f; /* Solid: Midnight Blue */
        }

        /* Reset dan Gaya Dasar */
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-bg-light);
            color: var(--color-text-dark);
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden; 
        }

        a {
            text-decoration: none;
            color: var(--color-secondary);
        }
        
        /* Header */
        .navbar {
            background-image: url('head-bg.png');
            background-size: cover;
            background-color: var(--color-header-light); 
            color: white;
            text-align: center; 
            padding: 50px 30px; 
            margin-bottom: 30px; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); 
            position: relative;
            min-height: 100vh; 
            height: auto; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            flex-direction: column; 
        }

        .navbar h1 {
            margin-left: 0;      
            padding-left: 0;  
            align-self: flex-start;  
            text-align: center;      
            font-size: 3rem; 
            font-weight: 700;
            color: white; 
            text-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .navbar p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .btn {
            margin-top: 15px;
            padding: 10px 15px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: 600; 
            transition: background-color 0.2s, box-shadow 0.2s, transform 0.1s; 
            position: relative; 
            overflow: hidden; 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2); 
            display: inline-flex; 
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.3);
        }

        .btn:after {
            content: '';
            position: absolute;
            top: 0;
            left: -150%; 
            width: 50%; 
            height: 100%;
            background: rgba(255, 255, 255, 0.5); 
            transform: skewX(-30deg); 
            transition: left 0.4s ease-in-out; 
            pointer-events: none; 
        }

        .btn:hover:after {
            left: 150%; 
            transition: left 0.4s ease-in-out; 
        }
        
        .btn-bab { background-color: #6d412b; color: white; } 
        .btn-latihan { background-color: #FFC94A; color: var(--color-text-dark); } 
        .btn-primary { background-color: var(--color-primary); color: white; }
        .btn-disabled { opacity: 0.6; cursor: not-allowed; }

        /* Quiz Content */
        .quiz-content {
            background-color: var(--color-card-light);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px var(--color-shadow);
            max-width: 800px;
            margin: 20px auto;
            text-align: center;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar div {
            height: 100%;
            background-color: var(--color-secondary);
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            margin-top: 10px;
            font-weight: 600;
        }

        .question-area {
            margin-bottom: 20px;
        }

        .question-area h4 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 2px solid transparent;
        }

        .option:hover {
            background-color: #e0e0e0;
        }

        .option.selected {
            background-color: var(--color-secondary);
            color: white;
        }

        .quiz-controls {
            margin-top: 20px;
        }

        .quiz-result {
            margin-top: 20px;
            padding: 20px;
            background-color: #f0f0f0;
            border-radius: 8px;
        }

        .quiz-result h3 {
            margin-bottom: 10px;
        }

        .quiz-result p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <header class="navbar">
        <h1>Latihan Soal</h1>
        <p>Bab 3: Pengukuran Panjang dan Berat - Kerjakan soal dengan baik!</p>
        <a href="bab_3.html" id="back-to-bab1" class="btn btn-cta btn-latihan"><i class="fas fa-arrow-left"></i> Kembali ke Bab 3</a>
    </header>

    <div class="quiz-content">
        <h3>Latihan Singkat Pengukuran Panjang dan Berat</h3>
        <div class="progress-container">
            <div class="progress-bar" id="quiz-progress"></div>
            <div class="progress-text" id="quiz-progress-text">Soal 0 dari 3</div>
        </div>
        <div id="question-area">
            <!-- Soal akan dimuat di sini -->
        </div>
        <div id="quiz-controls">
            <button class="btn btn-cta btn-primary" id="next-question-btn" disabled title="Lanjut ke soal berikutnya">Soal Selanjutnya</button> 
            <button class="btn btn-cta btn-latihan" id="submit-quiz-btn" style="display: none;" title="Selesaikan latihan dan lihat skor">Selesai & Cek Skor</button>
        </div>
        <div id="quiz-result" class="ai-response-area" style="display: none;">
            <!-- Hasil akan dimuat di sini -->
        </div>
    </div>

    <script>
        const questionBanks = {
            '1': [
                { text: "Sebatang bambu di Arboretum diukur panjangnya 120 cm. Satuan yang digunakan adalahâ€¦", options: ["Meter", "Sentimeter", "Kilogram", "Liter"], answer: "Sentimeter" },
                { text: "Panjang jalan setapak menuju rumpun bambu adalah 5 meter. Berapa cm?", options: ["50", "500", "5.000", "50.000"], answer: "500", image: "image_soal/B3-A-2.jpg" },
                { text: "Panjang bambu A = 230 cm, bambu B = 210 cm. Yang lebih panjang adalahâ€¦", options: ["Bambu A", "Bambu B", "Sama panjang", "Tidak tahu"], answer: "Bambu A" },
            ],
            '2': [
                { text: "3 meter batang bambu sama denganâ€¦", options: ["30 cm", "300 cm", "3.000 cm", "33 cm"], answer: "300 cm", image: "image_soal/B3-A-2.jpg"  },
                { text: "Jalan bambu sepanjang 2 km. Itu sama denganâ€¦", options: ["200 m", "20 m", "2.000 m", "200.000 m"], answer: "2.000 m",  image: "image_soal/B3-A-2.jpg"   },
                { text: "150 cm bambu sama denganâ€¦", options: ["1,5 m", "15 m", "150 m", "0,15 m"], answer: "1,5 m", image: "image_soal/B3-A-2.jpg" },
            ],
            '3': [
                { text: "Berat 1 ikat bambu adalah 3 kg. Jika dua ikat, beratnyaâ€¦", options: ["5 kg", "6 kg", "3 kg", "9 kg"], answer: "6 kg", image: "image_soal/B3-C-1.jpg" },
                { text: "Daun bambu yang dikumpulkan memiliki berat 500 g. Satuan tersebut adalahâ€¦", options: ["Kilogram", "Gram", "Liter", "Meter"], answer: "Gram" },
                { text: "2 kg daun bambu sama denganâ€¦", options: ["20 g", "200 g", "2.000 g", "20.000 g"], answer: "2.000 g", image: "image_soal/B3-B-1.jpg" },
            ],
            '4': [
                { text: "Berat 4 kg batang bambu sama denganâ€¦", options: ["40 g", "400 g", "4.000 g", "40.000 g"], answer: "4.000 g", image: "image_soal/B3-B-1.jpg"},
                { text: "Satu karung berisi 3.000 g daun bambu. Beratnya adalahâ€¦", options: ["3 kg", "30 kg", "300 kg", "0,3 kg"], answer: "3 kg", image: "image_soal/B3-B-1.jpg"},
                { text: "750 g bambu muda setara denganâ€¦", options: ["0,75 kg", "7,5 kg", "75 kg", "0,075 kg"], answer: "0,75 kg", image: "image_soal/B3-B-1.jpg"},
            ]
        };

        let currentQuestionIndex = 0;
        let userAnswers = Array(3).fill(null);
        let activeQuestions = [];

        // Fungsi untuk mendapatkan parameter URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Fungsi untuk memulai latihan
        function startQuiz() {
            const modul = getQueryParam('modul') || '1'; // Default ke '1' jika tidak ada
            const questions = questionBanks[modul] || questionBanks['1'];
            activeQuestions = questions.slice().sort(() => Math.random() - 0.5);
            activeQuestions = activeQuestions.slice(0, 3); // Pastikan 3 soal
            currentQuestionIndex = 0;
            userAnswers = Array(3).fill(null);
            
            // Update judul berdasarkan modul
            const titles = {
                '1': 'Pengukuran Panjang dengan Satuan Baku',
                '2': 'Hubungan Antarsatuan Baku Panjang',
                '3': 'Pengukuran Berat dengan Satuan Baku',
                '4': 'Hubungan Antarsatuan Baku Berat'
            };
            document.querySelector('h1').textContent = `Latihan Soal - ${titles[modul] || titles['1']}`;
            
            renderQuestion(currentQuestionIndex);
            updateProgress();
        }

        // Render soal
        // Render soal
        function renderQuestion(index) {
            const question = activeQuestions[index];
            const questionArea = document.getElementById('question-area');
            const imageHtml = question.image ? `<img src="${question.image}" alt="Gambar Soal" style="max-width: 100%; height: auto; margin-bottom: 20px; border-radius: 8px;">` : '';
            questionArea.innerHTML = `
                <!-- <h4>Soal //${index + 1} dari 3:</h4> -->
                ${imageHtml}
                <p>${question.text}</p>
                <div class="options">
                    ${question.options.map((option, i) => `
                        <div class="option" data-index="${i}" onclick="selectOption(${i})">${option}</div>
                    `).join('')}
                </div>
            `;
            updateNextButton();
        }

        const backBtn = document.getElementById('back-to-bab1');

        backBtn.addEventListener('click', function (e) {
            e.preventDefault(); // tahan navigasi sebentar

            const clickSound = new Audio('click.mp3.mp3');
            clickSound.play().catch(() => {});

            setTimeout(() => {
                window.location.href = this.href;
            }, 300); // delay agar suara terdengar
        });
        // Pilih opsi
        function selectOption(index) {
            userAnswers[currentQuestionIndex] = index;
            const options = document.querySelectorAll('.option');
            options.forEach((opt, i) => {
                opt.classList.toggle('selected', i === index);
            });
            updateNextButton();
        }

        function checkAnswerAndPlaySound() {
            const userIndex = userAnswers[currentQuestionIndex];
            const correctIndex = activeQuestions[currentQuestionIndex].options
                .indexOf(activeQuestions[currentQuestionIndex].answer);

            if (userIndex === correctIndex) {
                playSound('benar');
            } else {
                playSound('salah');
            }
        }


        // Update tombol next
        function updateNextButton() {
            const nextBtn = document.getElementById('next-question-btn');
            const submitBtn = document.getElementById('submit-quiz-btn');
            const isAnswered = userAnswers[currentQuestionIndex] !== null;
            nextBtn.disabled = !isAnswered;
            if (currentQuestionIndex === 2) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-block';
            } else {
                nextBtn.style.display = 'inline-block';
                submitBtn.style.display = 'none';
            }
        }

        // Update progress
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / 3) * 100;
            document.getElementById('quiz-progress').style.width = progress + '%';
            document.getElementById('quiz-progress-text').textContent = `Soal ${currentQuestionIndex + 1} dari 3`;
        }

        // Next question
        document.getElementById('next-question-btn').addEventListener('click', () => {
            checkAnswerAndPlaySound(); 

            setTimeout(() => {
                if (currentQuestionIndex < 2) {
                    currentQuestionIndex++;
                    renderQuestion(currentQuestionIndex);
                    updateProgress();
                }
            }, 600);
        });

        // Submit quiz
        document.getElementById('submit-quiz-btn').addEventListener('click', () => {
            checkAnswerAndPlaySound(); // ðŸ”Š suara soal terakhir

            setTimeout(() => {
                showResult();
            }, 600);
        });


        // Show result
        function showResult() {
            const { correctCount, total } = calculateResult();
            const score = (correctCount / total) * 100;
            const resultArea = document.getElementById('quiz-result');
            resultArea.style.display = 'block';
            resultArea.innerHTML = `
                <h3>Hasil Latihan</h3>
                <p>Total Soal Dijawab: <strong>${total}</strong></p>
                <p>Jawaban Benar: <strong style="color: var(--color-success);">${correctCount}</strong></p>
                <p>Jawaban Salah: <strong style="color: var(--color-error);">${total - correctCount}</strong></p>
                <p>Skor: <strong>${score.toFixed(0)}%</strong></p>
                <p>${score >= 70 ? 'Bagus! Kamu lulus latihan.' : 'Coba lagi untuk meningkatkan skor.'}</p>
            `;
            document.getElementById('quiz-controls').style.display = 'none';
        }

        // Calculate result
        function calculateResult() {
            let correctCount = 0;
            for (let i = 0; i < 3; i++) {
                const userAnswer = userAnswers[i];
                const correctAnswer = activeQuestions[i].options.indexOf(activeQuestions[i].answer);
                if (userAnswer === correctAnswer) correctCount++;
            }
            return { correctCount, total: 3 };
        }

        // Play sound function
        function playSound(type) {
            const audio = new Audio(`sound/${type}.mp3`);
            audio.play();
        }

        // Start quiz on load
        window.onload = startQuiz;
    </script>
</body>
</html></content>