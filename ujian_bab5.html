<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujian Kompetensi - Bab 5: Penyajian Data</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* Variabel Warna */
        :root {
            --color-primary: #854932; /* Cokelat Tua */
            --color-secondary: #CC7722; /* Oranye/Emas - Aksen */
            --color-bg-light: #f4f7f6; /* Latar Belakang Terang */
            --color-card-light: #ffffff; /* Card Terang */
            --color-text-dark: #333333; /* Teks Gelap */
            --color-error: #D9534F; /* Merah */
            --color-success: #5CB85C; /* Hijau */
            --color-shadow: rgba(0, 0, 0, 0.15); 
            --sidebar-width: 250px; 
            /* Warna Header Konsisten */
            --color-header-light: #A0522D; /* Solid: Sienna */
        }

        /* Dark Theme Variables */
        .dark-theme {
            --color-primary: #D8D8D8; 
            --color-secondary: #FFC94A; 
            --color-bg-light: #202c33; 
            --color-card-light: #2c3940; 
            --color-text-dark: #f0f0f0; 
            --color-shadow: rgba(0, 0, 0, 0.4); 
            /* Warna Header Dark Konsisten */
            --color-header-dark: #1f3a5f; /* Solid: Midnight Blue */
        }

        /* Reset dan Gaya Dasar */
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-bg-light);
            color: var(--color-text-dark);
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden; 
        }

        a {
            text-decoration: none;
            color: var(--color-secondary);
        }
        
        /* Header */
        .navbar {
            background-image: url('head-bg6.png');
            background-size: cover;
            background-color: var(--color-header-light); 
            color: white;
            text-align: center; 
            padding: 50px 30px; 
            margin-bottom: 30px; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); 
            position: relative;
            min-height: 100vh; 
            height: auto; 
            display: flex;
            align-items: center; 
            justify-content: center; 
            flex-direction: column; 
        }

        .navbar h1 {
            margin-left: 0;      
            padding-left: 0;  
            align-self: center;  
            text-align: center;      
            font-size: 3rem; 
            font-weight: 700;
            color: white; 
            text-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .navbar p {
            align-self: center;
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .btn {
            margin-top: 20px;
            padding: 10px 15px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: 600; 
            transition: background-color 0.2s, box-shadow 0.2s, transform 0.1s; 
            position: relative; 
            overflow: hidden; 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2); 
            display: inline-flex; 
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.3);
        }

        .btn:after {
            content: '';
            position: absolute;
            top: 0;
            left: -150%; 
            width: 50%; 
            height: 100%;
            background: rgba(255, 255, 255, 0.5); 
            transform: skewX(-30deg); 
            transition: left 0.4s ease-in-out; 
            pointer-events: none; 
        }

        .btn:hover:after {
            left: 150%; 
            transition: left 0.4s ease-in-out; 
        }
        
        .btn-bab { background-color: #6d412b; color: white; } 
        .btn-latihan { background-color: #FFC94A; color: var(--color-text-dark); } 
        .btn-primary { background-color: var(--color-primary); color: white; }
        .btn-disabled { opacity: 0.6; cursor: not-allowed; }


        /* Quiz Content */
        .quiz-content {
            background-color: var(--color-card-light);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px var(--color-shadow);
            max-width: 800px;
            margin: 20px auto;
            text-align: center;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar div {
            height: 100%;
            background-color: var(--color-secondary);
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            margin-top: 10px;
            font-weight: 600;
        }

        .question-area {
            margin-bottom: 20px;
        }

        .question-area h4 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 2px solid transparent;
        }

        .option:hover {
            background-color: #e0e0e0;
        }

        .option.selected {
            background-color: var(--color-secondary);
            color: white;
        }

        .quiz-controls {
            margin-top: 20px;
        }

        .quiz-result {
            margin-top: 20px;
            padding: 20px;
            background-color: #f0f0f0;
            border-radius: 8px;
        }

        .quiz-result h3 {
            margin-bottom: 10px;
        }

        .quiz-result p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <header class="navbar">
        <h1>Ujian Kompetensi</h1>
        <p>Bab 5: Penyajian Data - Kerjakan ujian dengan baik!</p>
        <a href="bab_5.html" id="back-to-bab1" class="btn btn-cta btn-primary"><i class="fas fa-arrow-left"></i> Kembali ke Bab 5</a>
    </header>

    <div class="quiz-content">
        <h3>Ujian Kompetensi Bab 5: Penyajian Data</h3>
        <div class="progress-container">
            <div class="progress-bar" id="quiz-progress"></div>
            <div class="progress-text" id="quiz-progress-text">Soal 0 dari 2</div>
        </div>
        <div id="question-area">
            <!-- Soal akan dimuat di sini -->
        </div>
        <div id="quiz-controls">
            <button class="btn btn-cta btn-primary" id="next-question-btn" disabled title="Lanjut ke soal berikutnya">Soal Selanjutnya</button> 
            <button class="btn btn-cta btn-latihan" id="submit-quiz-btn" style="display: none;" title="Selesaikan ujian dan lihat skor">Selesai & Cek Skor</button>
        </div>
        <div id="quiz-result" class="ai-response-area" style="display: none;">
            <!-- Hasil akan dimuat di sini -->
        </div>
    </div>

<script>
    // Bank Soal untuk Ujian Bab 5
    const questionBanks = [
        { text: "Jumlah bilangan adalah: A=1411, B=141, C=114. Bilangan yang paling sedikit adalah…", options: ["A", "B", "C", "Semua sama"], answer: "C" },
        { text: "Jika disajikan dalam tabel, angka terbesar adalah…", options: ["25", "35", "40", "Semua sama"], answer: "35", image: "image_soal/B5-B-2.png" },
    ];

    const TOTAL_QUESTIONS = questionBanks.length; // FIX

    let currentQuestionIndex = 0;
    let userAnswers = Array(TOTAL_QUESTIONS).fill(null); // FIX
    let activeQuestions = questionBanks.slice().sort(() => Math.random() - 0.5);

    function startQuiz() {
        currentQuestionIndex = 0;
        userAnswers = Array(TOTAL_QUESTIONS).fill(null); // FIX
        activeQuestions = questionBanks.slice().sort(() => Math.random() - 0.5);
        renderQuestion(currentQuestionIndex);
        updateProgress();
    }

    function renderQuestion(index) {
        const question = activeQuestions[index];
        const questionArea = document.getElementById('question-area');
        const imageHtml = question.image
            ? `<img src="${question.image}" style="max-width:100%;margin-bottom:20px;border-radius:8px;">`
            : '';

        questionArea.innerHTML = `
            ${imageHtml}
            <p>${question.text}</p>
            <div class="options">
                ${question.options.map((option, i) => `
                    <div class="option" data-index="${i}" onclick="selectOption(${i})">${option}</div>
                `).join('')}
            </div>
        `;
        updateNextButton();
    }

    function selectOption(index) {
        userAnswers[currentQuestionIndex] = index;
        document.querySelectorAll('.option').forEach((opt, i) => {
            opt.classList.toggle('selected', i === index);
        });
        updateNextButton();
    }

    function checkAnswerAndPlaySound() {
        const userIndex = userAnswers[currentQuestionIndex];
        const correctIndex = activeQuestions[currentQuestionIndex].options
            .indexOf(activeQuestions[currentQuestionIndex].answer);
        playSound(userIndex === correctIndex ? 'benar' : 'salah');
    }

    // Update tombol next
    function updateNextButton() {
        const nextBtn = document.getElementById('next-question-btn');
        const submitBtn = document.getElementById('submit-quiz-btn');
        const isAnswered = userAnswers[currentQuestionIndex] !== null;

        nextBtn.disabled = !isAnswered;

        if (currentQuestionIndex === TOTAL_QUESTIONS - 1) { // FIX
            nextBtn.style.display = 'none';
            submitBtn.style.display = 'inline-block';
        } else {
            nextBtn.style.display = 'inline-block';
            submitBtn.style.display = 'none';
        }
    }

    // Update progress
    function updateProgress() {
        const progress = ((currentQuestionIndex + 1) / TOTAL_QUESTIONS) * 100; // FIX
        document.getElementById('quiz-progress').style.width = progress + '%';
        document.getElementById('quiz-progress-text').textContent =
            `Soal ${currentQuestionIndex + 1} dari ${TOTAL_QUESTIONS}`; // FIX
    }

    // Next question
    document.getElementById('next-question-btn').addEventListener('click', () => {
        checkAnswerAndPlaySound();
        setTimeout(() => {
            if (currentQuestionIndex < TOTAL_QUESTIONS - 1) { // FIX
                currentQuestionIndex++;
                renderQuestion(currentQuestionIndex);
                updateProgress();
            }
        }, 600);
    });

    // Submit quiz
    document.getElementById('submit-quiz-btn').addEventListener('click', () => {
        checkAnswerAndPlaySound();
        setTimeout(showResult, 600);
    });

    function showResult() {
        const { correctCount, total } = calculateResult();
        const score = (correctCount / total) * 100;
        const resultArea = document.getElementById('quiz-result');
        resultArea.style.display = 'block';
        resultArea.innerHTML = `
            <h3>Hasil Latihan</h3>
            <p>Total Soal Dijawab: <strong>${total}</strong></p>
            <p>Jawaban Benar: <strong style="color: var(--color-success);">${correctCount}</strong></p>
            <p>Jawaban Salah: <strong style="color: var(--color-error);">${total - correctCount}</strong></p>
            <p>Skor: <strong>${score.toFixed(0)}%</strong></p>
            <p>${score >= 70 ? 'Bagus! Kamu lulus latihan.' : 'Coba lagi untuk meningkatkan skor.'}</p>
        `;
        document.getElementById('quiz-controls').style.display = 'none';
    }

    function calculateResult() {
        let correctCount = 0;
        for (let i = 0; i < TOTAL_QUESTIONS; i++) { // FIX
            const userAnswer = userAnswers[i];
            const correctAnswer =
                activeQuestions[i].options.indexOf(activeQuestions[i].answer);
            if (userAnswer === correctAnswer) correctCount++;
        }
        return { correctCount, total: TOTAL_QUESTIONS }; // FIX
    }

    function playSound(type) {
        const audio = new Audio(`sound/${type}.mp3`);
        audio.play();
    }

    window.onload = startQuiz;
</script>
</body>
</html></content>